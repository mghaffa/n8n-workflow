name: GPT Probe v1 (Only API)

on:
  workflow_dispatch:
    inputs:
      GPT_MODEL:
        description: "Model to probe"
        required: false
        default: "gpt-4o-mini"
      OPENAI_BASE:
        description: "Optional override (OpenAI base)"
        required: false
        default: "https://api.openai.com/v1"

jobs:
  probe:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: "20"

      - name: Probe OpenAI
        env:
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          OPENAI_MODEL:   ${{ inputs.GPT_MODEL }}
          OPENAI_BASE:    ${{ inputs.OPENAI_BASE }}
        run: node runner/gpt_probe_v1.mjs
